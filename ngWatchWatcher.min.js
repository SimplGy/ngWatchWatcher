angular.module("watchWatcher",[]),angular.module("watchWatcher").factory("scopeCounters",["$rootScope",function(a){function b(b){b=b||a;var c,d;if(c=0,b.$$childHead)for(c++,d=b.$$childHead;d.$$nextSibling;)c++,d=d.$$nextSibling;return c}function c(a){a=a||angular.element(document.body);var b;return b=[],a.data().hasOwnProperty("$scope")&&b.push(a.data().$scope),angular.forEach(a.children(),function(a){return c($(a))}),b}function d(b){for(var c=[b||a],d=[],e=null;c.length>0;)e=c.pop(),e&&d.push(e),e.$$childHead&&c.push(e.$$childHead),e.$$nextSibling&&c.push(e.$$nextSibling);return d}return api={countChildren:b,byEl:c,byScope:d}}]),angular.module("watchWatcher").factory("watchCounters",["$rootScope",function(a){function b(a){a=a||angular.element(document.body);var c;return c=[],a.data().hasOwnProperty("$scope")&&(c=c.concat(a.data().$scope.$$watchers)),angular.forEach(a.children(),function(a){return b($(a))}),c}function c(b){for(var c=[b||a],d=[],e=null;c.length>0;)e=c.pop(),e.$$watchers&&(d=d.concat(e.$$watchers)),e.$$childHead&&c.push(e.$$childHead),e.$$nextSibling&&c.push(e.$$nextSibling);return d}return api={byEl:b,byScope:c}}]),angular.module("watchWatcher").controller("WatchLightController",function(){function a(){h++;var a={start:Date.now()};i.push(a),setTimeout(function(){a.end=Date.now(),a.duration=a.end-a.start},0)}function b(a){a=a||i;var b=a.length,c=a[b-1].start-a[0].start;return c/=1e3,Math.round(b/c*10)/10}function c(a){a=a||i;var b,c,d,e=0;for(b=0,c=a.length;c>b;b++)d=a[b].duration,d&&(e+=d);return Math.round(e/c*10)/10}function d(){console.log("\nDigest Information\n------------------\nDigests Per Second:      "+b(i)+" digests   (fewer is less taxing)\nAverage Digest Duration: "+c(i)+" ms        (shorter is more performant)\nWatches Fired So Far:    "+h+"\n\n",{digests:i})}function e(){i.length>g&&(i=i.slice(-g))}var f=5e3,g=50,h=0,i=[];setInterval(e,f),this.cleanUp=e,this.countWatch=a,this.logInformation=d,this.getDigestsPerSecond=b,this.getAverageDigestDuration=c,this.getRecentDigests=function(){return i}}),angular.module("watchWatcher").directive("watchLight",["$rootScope",function(a){return{restrict:"E",template:'<i class="watchLight"\n   title="Blinking indicates $digest loop activity.\nClick to log details."\n   style="cursor: pointer;\n   display: block; position: fixed;\n   top: 10px; right: 10px;\n   width:14px; height:14px;\n   border-radius: 50%; background-color: #ddd;\n   -webkit-transition:background-color .15s, box-shadow .04s;\n   transition:background-color .15s, box-shadow .04s;\n"></i>',replace:!0,controller:"WatchLightController",link:function(b,c,d,e){function f(a,b){a=a||"#5AB953",b=b||"#29832B",c.css("background-color",a),c.css("box-shadow","inset 0 0 0 2px "+b),clearTimeout(j),clearTimeout(k),j=setTimeout(g,700),k=setTimeout(h,100)}function g(){c.css("background-color","#ddd")}function h(){c.css("box-shadow","inset 0 0 0 0 #49A34B")}function i(){return e.countWatch(),f(),!1}var j,k;c.on("click",function(){f("#69d","#369"),e.cleanUp(),e.logInformation()}),a.$watch(i)}}}]);